<!DOCTYPE html>
<html>
<title>Webex Teams Meetings Quick Start</title>
<head>
    <script crossorigin src="https://unpkg.com/webex@^1/umd/webex.min.js"></script>
</head>
<body>
  <script>
  let redirect_uri = `${window.location.protocol}//${window.location.host}`;

if (window.location.pathname) {
  redirect_uri += window.location.pathname;
}

// Inititate the SDK
// IN A PRODUCTION APP YOU SHOULD NOT HARDCODE THESE VALUES BUT INSTEAD LOAD
// THEM FROM THE ENVIRONMENT AT BUILD TIME. SECRETS AND OTHER CREDENTIALS SHOULD
// NOT BE COMMITTED TO THE CODEBASE.
// eslint-disable-next-line no-multi-assign
const webex = window.webex = Webex.init({
  config: {
    credentials: {
      client_id: 'Cb257d2a93b52b6752da37c61963292c766264023b6f42f391d887a100ad9bb4b',
      redirect_uri,
      scope: 'spark:all spark:kms'
    }
  }
});

webex.once('ready', () => {
  // Now, let's set up the event listener for the Authenticate Button
  document.getElementById('authorization').addEventListener('submit', (event) => {
    // let's make sure we don't reload the page when we submit the form
    event.preventDefault();

    // initiate the login sequence if not authenticated.
    webex.authorization.initiateLogin();
  });

  // Now, let's set up the event listener for the Authenticate Button
  document.getElementById('logout').addEventListener('submit', (event) => {
    // let's make sure we don't reload the page when we submit the form
    event.preventDefault();

    if (webex.canAuthorize) {
      // if already authenticated, logout on click
      webex.logout();
    }
    else {
      // No user is authenticated
      console.log('cannot logout when no user is authenticated');
    }
  });

  if (webex.canAuthorize) {
    // Authorization is successful

    // your app logic goes here

    // Change Authentication status to `Authenticated`
    const authStatus = document.getElementById('authentication-status');

    authStatus.innerHTML = 'Authenticated';
    authStatus.style = 'color: green';
  }
});
  </script>
</body>
</html>
